---
title: "2-6. 字符串详解"
date: 2023-04-04
---
<br>

:::tip
字符串指的是str数据类型，他是用来表示多个字符的   
字符包罗万物，能在键盘上打出来的都可以。
:::

## Ⅰ. 字符串定义
#### 1. 定义方式
字符串有3种不同的定义方式
- 双引号：`'字符串'`
- 单引号：`"字符串"`
- 三引号：`"""字符串""""`

```python
str1 = 'Musk'
str2 = "Fuck"
str3 = """Shit
    真的可以
        换行
"""""
```

#### 2.  三引号定义法  

三引号不赋值给变量，它就是注释，赋值给变量，他就变成了字符串。  
三引号定义法，和多行注释的写法一样，同样支持换行操作。 

注意：字符串包含的范围是从三个引号开始，到下一个三个引号结束

#### 3. 字符串嵌套
如果想要定义的字符串本身，是包含：单引号、双引号自身就需要进行引号嵌套或者转义了。  
- 引号嵌套：单引号里可以包含双引号，双引号里可以包含单引号
- 可以使用转移字符（\）来将引号解除效用，变成普通字符串

## Ⅱ. 字符串拼接
连个字符串字面量是可以进行拼接的，用 `+ `号完成，此时 `+` 是字符串连接符。  
只有字符串之间可以拼接，拼接其他数据类型会报错

```python
str1 = "一个真正的"
str2 = "man"
str3 = "我是" + str1 + str2
print(str3)  # 我是一个真正的man
print("哎呀" + 20) # 报错：TypeError
```

## Ⅲ. 字符串格式化
:::tip
字符串格式化的语法和SQL里的预查询占位符的用法很相似。  
其实字符串格式化指的就是在字符串中使用变量。
:::
#### 1. 语法

```python
str1 = "Jinno"
message = "%s is a dick" % str1
print(message)  # Jinno is a dick
print(type(message))  # <class 'str'>
```
如上完成字符串和变量的快速拼接，其中：
- %：表示我要占位
- s：表示将变量转换为字符串放入该位置

综合来说就是：%s表示先在这里占个位置，实际的内容是 后面给出的值
#### 2. 占位符类型
其他数据类型的值也可以用%s进行占位，不过都会转为字符串。  
其实Python支持多种数据类型的占位符，可以手动指定占位符类型，如下：
- %s：将内容转换成字符串，放入占位位置
- %d：将内容转换成整数，放入占位位置
- %f：将内容转换成浮点型，放入占位位置

```python
message1 = "%s is my id" % "dickman"
print(message1)  # dickman is my id
print(type(message1))  # <class 'str'>

message2 = "%d is my id" % 12
print(message2)  # dickman is my id
print(type(message2))  # <class 'str'>

message3 = "%f is my id" % 12.1
print(message3)  # 12.100000 is my id is my id
print(type(message3))  # <class 'str'>
```
::: danger 疑问？
如上可知，无论占位符是什么类型，拼接后都是字符串类型，
意义是是什么呢？暂时未知！
:::

#### 3. 多个占位符

一个字符串可以有多个占位符，此时值要用括号括起来，并安装占位顺序用逗号分割值。
```python
message = "%s is %d years old" % ("Jinno", 20)
print(message)  # Jinno is 20 years old
```

#### 4. 数字格式化的精度控制
对浮点数进行格式化时，默认会保留小数点后6位。  
我们也可以手动使用辅助符号 `m.n` 来控制数据的宽度和精度：
- m：控制宽度，要求是数字（很少使用）,设置的宽度小于数字自身，不生效
- n：控制小数点精度，要求是数字，会进行小数的四舍五入

```python
message1 = "我的余额为：%.2f" % 2000.139
message2 = "我的年龄：%5d" % 21
message3 = "混合使用： %5.5f" % 2.1
print(message1)  # 我的余额为：2000.14
print(message2)  # 我的年龄：   21，前面补了3个空格
print(message3)  # 混合使用：    2.10000
```

#### 5. 快速格式化
通过语法 `f"内容{变量}"` 的格式来快速格式化。  

注意：这种写法不做精度控制，也不理会类型，适用于快速格式化字符串  
``` python
uname = "Jinno"
message = f"我是{uname},今年{20}岁了，我的存款为：{923232.3032}"
print(message)  # 我是Jinno,今年20岁了，我的存款为：923232.3032
```


#### 6. 格式化表达式
::: tip
表达式：一条具有明确执行结果的代码语句  
例如：  
`1 + 1` 、`5 * 2` ，就是表达式，因为有具体的结果，结果是一个数字.   
又或者，常见的变量定义：`name = "Jinno"`  `age = 11 + 11` 等号右侧的都是表达式呢，因为它们有具体的结果，结果赋值给了等号左侧的变量。
:::

字符串格式化，除了可以格式化数据化，还可以直接格式化表达式，即将表达式的执行结果替换到占位符。

``` python
message1 = "1+1 = %d" % (1 + 1)
message2 = "\"Jinno\" 的数据类型是：%s" % type("Jinno")
print(message1)  # 1+1 = 2
print(message2)  # "Jinno" 的数据类型是：<class 'str'>
```



